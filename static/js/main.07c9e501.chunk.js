(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(60)},39:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(11),s=a.n(c),i=a(3),r=a(1),o=a(13),u=a(28),p={files:[],usageData:null,selectedFile:null,filesLoading:!1,formLoading:!1,modalLoading:!1,layout:"table",banner:{message:null,type:null}},f=Object(o.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPLOAD_FILE":return Object(r.a)({},e,{files:e.files.concat(t.payload),usageData:{quota:1e7,used:e.usageData.used+t.payload.size}});case"DELETE_FILE":var a=e.files.filter(function(e){return e.id===t.payload})[0];return Object(r.a)({},e,{files:e.files.filter(function(e){return e.id!==t.payload}),selectedFile:null,usageData:{quota:1e7,used:e.usageData.used-a.size}});case"FETCH_FILES":return Object(r.a)({},e,{files:t.payload.files,usageData:t.payload.usageData});case"MODAL_LOADING":return Object(r.a)({},e,{modalLoading:!0});case"!MODAL_LOADING":return Object(r.a)({},e,{modalLoading:!1});case"FILES_LOADING":return Object(r.a)({},e,{filesLoading:!0});case"!FILES_LOADING":return Object(r.a)({},e,{filesLoading:!1});case"FORM_LOADING":return Object(r.a)({},e,{formLoading:!0});case"!FORM_LOADING":return Object(r.a)({},e,{formLoading:!1});case"SELECT_FILE":return Object(r.a)({},e,{selectedFile:t.payload});case"UNSELECT_FILE":return Object(r.a)({},e,{selectedFile:null});case"CHANGE_LAYOUT":return Object(r.a)({},e,{layout:t.payload});case"SHOW_BANNER":return Object(r.a)({},e,{banner:{message:t.payload.message,type:t.payload.type}});case"RESET_BANNER":return Object(r.a)({},e,{banner:{message:null,type:null}});default:return e}},Object(o.a)(u.a)),d=(a(39),a(4)),m=a(5),E=a(8),y=a(6),h=a(7),b=a(15),N=a.n(b),O="https://cloud-box-api.herokuapp.com",g=a(9),L=a.n(g),_=a(29),F=a.n(_),v=function(e){switch(e){case".svg":return"fas fa-file-image";case".mp3":return"fas fa-file-audio";case".flv":return"fas fa-file-video";case".docx":return"fas fa-file-word";case".pptx":return"fas fa-file-powerpoint";case".xlsx":return"fas fa-file-excel";case".csv":return"fas fa-file-csv";case".pdf":return"fas fa-file-pdf";case".css":return"fas fa-file-code";case".txt":return"fas fa-file-alt";default:return"fas fa-file"}};function j(e){var t=e.files.map(function(t){return l.a.createElement("tr",{onClick:function(){e.selectFile(t)}},l.a.createElement("td",null,l.a.createElement("i",{className:v(t.fileType)})," ",t.fileName),l.a.createElement("td",null,t.fileType),l.a.createElement("td",null,L()(t.size)),l.a.createElement("td",null,new F.a(t.dateUploaded).fromNow()))});return l.a.createElement("div",{className:"file-container"},l.a.createElement("table",{className:"file-table"},l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"Size"),l.a.createElement("th",null,"Date Added"),t))}function A(e){return l.a.createElement("div",{className:"file",onClick:function(){e.selectFile(Object(r.a)({},e))}},l.a.createElement("i",{className:v(e.fileType)}),l.a.createElement("p",{className:"file__name"},"".concat(e.fileName.slice(0,15),"...")),l.a.createElement("p",{className:"file__size"},L()(e.size)))}function D(e){var t=e.files.map(function(t){return l.a.createElement(A,Object.assign({selectFile:e.selectFile},t))});return l.a.createElement("div",{className:"file-grid"},t)}function S(e){return l.a.createElement("div",{className:"loader__container"},l.a.createElement("div",{className:"loader"}))}var w=function(){return l.a.createElement("div",{className:"nofiles"},l.a.createElement("h3",null,"Your file directory is empty."),l.a.createElement("p",null,"To get started, try uploading some files"))},I=function(e){function t(){return Object(d.a)(this,t),Object(E.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFiles()}},{key:"renderFiles",value:function(){return"table"===this.props.layout?l.a.createElement(j,{selectFile:this.props.selectFile,files:this.props.files}):l.a.createElement(D,{selectFile:this.props.selectFile,files:this.props.files})}},{key:"render",value:function(){var e=this;return this.props.loading?l.a.createElement(S,null):0===this.props.files.length?l.a.createElement(w,null):l.a.createElement("section",{className:"directory-section"},l.a.createElement("h3",null,"Your Files"),l.a.createElement("div",{className:"directory-buttons"},l.a.createElement("button",{onClick:function(){e.props.changeLayout("table")},className:"table"===this.props.layout?"directory-button-active":""},l.a.createElement("i",{class:"fas fa-table"})),l.a.createElement("button",{onClick:function(){e.props.changeLayout("grid")},className:"grid"===this.props.layout?"directory-button-active":""},l.a.createElement("i",{class:"fas fa-th-large"}))),this.renderFiles())}}]),t}(l.a.Component),T=Object(i.b)(function(e){return{files:e.files,loading:e.filesLoading,layout:e.layout}},{fetchFiles:function(){return function(e){e({type:"FILES_LOADING"}),N.a.get("".concat(O,"/files")).then(function(t){e({type:"!FILES_LOADING"}),e({type:"FETCH_FILES",payload:t.data})}).catch(function(t){e({type:"!FILES_LOADING"}),e({type:"SHOW_BANNER",payload:{message:"Something went wrong on server",type:"warning"}}),setTimeout(function(){e({type:"RESET_BANNER"})},2e3)})}},changeLayout:function(e){return{type:"CHANGE_LAYOUT",payload:e}},selectFile:function(e){return{type:"SELECT_FILE",payload:e}}})(I),R=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(l)))).state={file:null},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"fileChangeHandler",value:function(e){this.setState({file:e.target.files[0]})}},{key:"uploadFile",value:function(e){if(e.preventDefault(),this.state.file){var t=new FormData;t.append("file",this.state.file),t.append("fieldName",this.state.file.name),t.append("size",this.state.file.size),this.props.uploadFile(t),this.setState({file:null})}}},{key:"render",value:function(){return l.a.createElement("section",{className:"form-section"},this.props.loading?l.a.createElement(S,null):l.a.createElement("div",{className:"form-container"},l.a.createElement("h3",null,"Upload a new file"),l.a.createElement("form",{onSubmit:this.uploadFile.bind(this)},l.a.createElement("input",{type:"file",onChange:this.fileChangeHandler.bind(this)}),l.a.createElement("button",{type:"submit"},l.a.createElement("i",{class:"fas fa-cloud-upload-alt"})," Upload"))))}}]),t}(l.a.Component),C=Object(i.b)(function(e){return{loading:e.formLoading}},{uploadFile:function(e){return function(t){t({type:"FORM_LOADING"}),N.a.post("".concat(O,"/new"),e).then(function(e){t({type:"UPLOAD_FILE",payload:e.data}),t({type:"SHOW_BANNER",payload:{message:"File Uploaded Successfully",type:"success"}}),t({type:"!FORM_LOADING"}),setTimeout(function(){t({type:"RESET_BANNER"})},2e3)}).catch(function(e){e.response?(500===e.response.status&&(t({type:"!FORM_LOADING"}),t({type:"SHOW_BANNER",payload:{message:"Something went wrong on server",type:"warning"}}),setTimeout(function(){t({type:"RESET_BANNER"})},2e3)),400===e.response.status&&(t({type:"!FORM_LOADING"}),t({type:"SHOW_BANNER",payload:{message:"Quota exceeded",type:"warning"}}),setTimeout(function(){t({type:"RESET_BANNER"})},2e3))):(t({type:"!FORM_LOADING"}),t({type:"SHOW_BANNER",payload:{message:"Something went wrong",type:"warning"}}),setTimeout(function(){t({type:"RESET_BANNER"})},2e3))})}}})(R),k=function(e){function t(){return Object(d.a)(this,t),Object(E.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"unselectFile",value:function(e){this.props.loading||this.props.unselectFile()}},{key:"downloadFile",value:function(e){window.open("https://cloud-box-api.herokuapp.com/download/".concat(e)),this.props.unselectFile()}},{key:"render",value:function(){var e=this;if(!this.props.file)return null;var t=this.props.file,a=t.fileType,n=t.fileName,c=t.size,i=t.id;return s.a.createPortal(l.a.createElement("div",{className:"action-modal__backdrop",onClick:this.unselectFile.bind(this)},l.a.createElement("div",{className:"action-modal",onClick:function(e){e.stopPropagation()}},this.props.loading?l.a.createElement(S,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"".concat(v(a)," action-modal__icon")}),l.a.createElement("h3",null,n),l.a.createElement("p",null,L()(c)),l.a.createElement("div",{className:"action-modal__buttons"},l.a.createElement("button",{className:"button-delete",onClick:function(){e.props.deleteFile(i)}},"Delete"),l.a.createElement("button",{className:"button-download",onClick:function(){e.downloadFile(i)}},l.a.createElement("i",{class:"fas fa-cloud-upload-alt"})," Download"))))),document.querySelector("#modal"))}}]),t}(l.a.Component),B=Object(i.b)(function(e){return{file:e.selectedFile,loading:e.modalLoading}},{unselectFile:function(){return{type:"UNSELECT_FILE"}},deleteFile:function(e){return function(t){t({type:"MODAL_LOADING"}),N.a.delete("".concat(O,"/download/").concat(e)).then(function(a){t({type:"!MODAL_LOADING"}),t({type:"DELETE_FILE",payload:e}),t({type:"SHOW_BANNER",payload:{message:"File Deleted Successfully",type:"success"}}),setTimeout(function(){t({type:"RESET_BANNER"})},2e3)}).catch(function(e){t({type:"!MODAL_LOADING"}),t({type:"UNSELECT_FILE"}),t({type:"SHOW_BANNER",payload:{message:"Something went wrong",type:"warning"}}),setTimeout(function(){t({type:"RESET_BANNER"})},2e3)})}}})(k),G=function(e){return e.message?s.a.createPortal(l.a.createElement("div",{className:"success"===e.type?"banner banner-success":"banner banner-warning"},l.a.createElement("h1",null,"success"===e.type?l.a.createElement("i",{class:"fas fa-check-circle"}):l.a.createElement("i",{class:"fas fa-exclamation-circle"})," ",e.message)),document.querySelector("#banner")):null},x=function(e){var t=e.quota,a=(e.used/t*100).toFixed(2),n={width:"".concat(a,"%")};return l.a.createElement("div",{className:"progress-bar__container"},l.a.createElement("div",{className:"progress-bar__outer"},l.a.createElement("div",{className:"progress-bar__inner",style:n}),l.a.createElement("h3",null,a,"%")))},H=function(e){function t(){return Object(d.a)(this,t),Object(E.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){if(!this.props.usageData)return l.a.createElement("div",{className:"quota-section"},l.a.createElement(S,null));var e=this.props.usageData,t=e.quota,a=e.used;return l.a.createElement("div",{className:"quota-section"},l.a.createElement("h3",null,"Usage Stats"),l.a.createElement("p",null,L()(a)," out of ",L()(t)," used."),l.a.createElement(x,this.props.usageData))}}]),t}(l.a.Component),M=Object(i.b)(function(e){return{usageData:e.usageData}},{})(H),U=function(e){function t(){return Object(d.a)(this,t),Object(E.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(B,null),l.a.createElement(G,this.props.banner),l.a.createElement("div",{className:"heading"},l.a.createElement("h1",{className:"logo"},l.a.createElement("i",{class:"fas fa-cloud"})," Cloud Box ",l.a.createElement("span",null,"V1")),l.a.createElement("p",{className:"about"},"The files in the directory will periodically be reset, and the quota has been arbitrarily set to 9.54MB")),l.a.createElement("div",{className:"flex-2"},l.a.createElement(M,null),l.a.createElement(C,null)),l.a.createElement(T,null))}}]),t}(l.a.Component),q=Object(i.b)(function(e){return{banner:e.banner}},null)(U);s.a.render(l.a.createElement(i.a,{store:f},l.a.createElement(q,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.07c9e501.chunk.js.map